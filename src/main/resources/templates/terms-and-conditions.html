<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/main :: head}">
    <title>Terms and Conditions - Eshal Hajj & Umrah Store</title>
</head>
<body class="bg-gray-50">
    <!-- Include auth modals -->
    <div th:replace="~{layout/auth-modals :: auth-modals}"></div>

    <!-- Navbar -->
    <nav th:replace="~{layout/main :: nav}"></nav>

    <!-- Main Content -->
    <div class="pt-32 md:pt-24">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-3xl font-bold mb-8 text-primary-dark mt-8">Terms and Conditions</h1>
                
                <div class="bg-white rounded-lg shadow-md p-8">
                    <div class="prose prose-lg max-w-none">

                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">1. Acceptance of Terms</h2>
                        <p class="mb-6">By accessing and using the Eshal Hajj & Umrah Store website (hereinafter referred to as "the Website"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">2. Description of Service</h2>
                        <p class="mb-6">Eshal Hajj & Umrah Store provides an online platform for the sale of Hajj and Umrah related products, including but not limited to prayer mats, ihram clothing, prayer beads, and other religious items. Our services include product browsing, ordering, payment processing, and delivery.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">3. User Registration and Account</h2>
                        <p class="mb-4">To access certain features of our website, you may be required to create an account. You agree to:</p>
                        <ul class="list-disc pl-6 mb-6 space-y-2">
                            <li>Provide accurate, current, and complete information during registration</li>
                            <li>Maintain and update your account information to keep it accurate, current, and complete</li>
                            <li>Maintain the security of your password and account</li>
                            <li>Accept responsibility for all activities that occur under your account</li>
                            <li>Notify us immediately of any unauthorized use of your account</li>
                        </ul>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">4. Product Information and Pricing</h2>
                        <p class="mb-4">We strive to provide accurate product descriptions and pricing. However, we do not warrant that product descriptions, colors, information, or other content available on the website are accurate, complete, reliable, current, or error-free.</p>
                        <p class="mb-6">All prices are in Indian Rupees (INR) and are subject to change without notice. Applicable taxes and shipping charges will be added to your order total.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">5. Ordering and Payment</h2>
                        <p class="mb-4">By placing an order, you:</p>
                        <ul class="list-disc pl-6 mb-4 space-y-2">
                            <li>Confirm that all information provided is accurate and complete</li>
                            <li>Agree to pay the full amount specified for the order</li>
                            <li>Authorize us to process your payment through our secure payment gateway</li>
                        </ul>
                        <p class="mb-6">We reserve the right to refuse or cancel any order for any reason, including but not limited to product availability, errors in pricing or product information, or suspected fraud.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">6. Payment Terms</h2>
                        <p class="mb-4">We accept payments through Razorpay, which supports various payment methods including:</p>
                        <ul class="list-disc pl-6 mb-6 space-y-2">
                            <li>Credit and debit cards</li>
                            <li>UPI payments</li>
                            <li>Net banking</li>
                            <li>Digital wallets</li>
                        </ul>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">7. Shipping and Delivery</h2>
                        <p class="mb-4">We ship to addresses within India. Delivery times may vary based on your location and the shipping method selected. While we strive to deliver within the estimated timeframe, we cannot guarantee exact delivery dates.</p>
                        <p class="mb-6">Risk of loss and title for items purchased pass to you upon delivery of the items to the carrier.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">8. Returns and Refunds</h2>
                        <p class="mb-6">Please refer to our separate "Cancellation and Refunds" policy for detailed information about returns, exchanges, and refunds.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">9. Intellectual Property Rights</h2>
                        <p class="mb-4">All content on this website, including but not limited to text, graphics, logos, images, audio clips, digital downloads, and data compilations, is the property of Eshal Hajj & Umrah Store or its content suppliers and is protected by Indian and international copyright laws.</p>
                        <p class="mb-6">You may not reproduce, distribute, modify, or create derivative works from any content on this website without our express written consent.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">10. Privacy and Data Protection</h2>
                        <p class="mb-6">Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the website, to understand our practices regarding the collection and use of your personal information.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">11. Limitation of Liability</h2>
                        <p class="mb-4">To the maximum extent permitted by applicable law, Eshal Hajj & Umrah Store shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or use, arising out of or relating to your use of the website or any products purchased through it.</p>
                        <p class="mb-6">Our total liability to you for any claims arising from your use of the website or products shall not exceed the amount you paid for the specific product giving rise to the claim.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">12. Indemnification</h2>
                        <p class="mb-6">You agree to indemnify, defend, and hold harmless Eshal Hajj & Umrah Store and its officers, directors, employees, and agents from and against any claims, damages, obligations, losses, liabilities, costs, or debt arising from your use of the website or violation of these terms.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">13. Governing Law and Jurisdiction</h2>
                        <p class="mb-6">These terms and conditions shall be governed by and construed in accordance with the laws of India. Any disputes arising from these terms or your use of the website shall be subject to the exclusive jurisdiction of the courts in Mumbai, Maharashtra, India.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">14. Changes to Terms</h2>
                        <p class="mb-6">We reserve the right to modify these terms and conditions at any time. Changes will be effective immediately upon posting on the website. Your continued use of the website after any changes constitutes acceptance of the new terms.</p>
                        
                        <h2 class="text-2xl font-semibold text-primary-dark mb-4">15. Contact Information</h2>
                        <p class="mb-6">For cancellation, return, or refund inquiries, please contact us:</p>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="mb-2"><strong>Email:</strong> eshalumrahessentials@gmail.com</p>
                            <p class="mb-2"><strong>Phone:</strong> (+91) 9923067286 / 9764417286 / 7030890979</p>
                            <p class="mb-2"><strong>Business Hours:</strong> Monday to Saturday, 9:00 AM to 6:00 PM</p>
                            <p class="mb-2"><strong>Response Time:</strong> Within 24 hours</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer th:replace="~{layout/main :: footer}"></footer>

    <!-- Scripts -->
    <script src="/js/auth.js"></script>
    <script src="/js/cart.js"></script>
    <script src="/js/checkout.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="/js/countries2.js"></script>
    <script>
        // Global auth state
        let isAuthenticated = false;

        // Check auth status and update UI when page loads
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const response = await fetch('/api/auth/check', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'include'
                });

                if (!response.ok) {
                    throw new Error('Failed to check auth status');
                }

                const data = await response.json();
                isAuthenticated = data.authenticated;

                const cartLink = document.getElementById('cartLink');
                const mobileCartLink = document.getElementById('mobileCartLink');
                const loginRegisterLink = document.getElementById('loginRegisterLink');
                const logoutLink = document.getElementById('logoutLink');

                // Always show cart links
                if (cartLink) cartLink.classList.remove('hidden');
                if (mobileCartLink) mobileCartLink.classList.remove('hidden');

                if (isAuthenticated) {
                    loginRegisterLink.classList.add('hidden');
                    logoutLink.classList.remove('hidden');
                    
                    // Check if user is admin and show admin menu
                    if (data.user && data.user.role === 'ROLE_ADMIN') {
                        console.log('User is admin, showing admin dropdown');
                        const adminDropdown = document.getElementById('adminDropdown');
                        const mobileAdminMenu = document.getElementById('mobileAdminMenu');
                        if (adminDropdown) {
                            adminDropdown.classList.remove('hidden');
                            console.log('Admin dropdown shown');
                        }
                        if (mobileAdminMenu) {
                            mobileAdminMenu.classList.remove('hidden');
                            console.log('Mobile admin menu shown');
                        }
                    } else {
                        console.log('User is not admin, role:', data.user?.role);
                    }
                } else {
                    loginRegisterLink.classList.remove('hidden');
                    logoutLink.classList.add('hidden');
                }

                // Always update cart count
                if (typeof updateCartCount === 'function') {
                    await updateCartCount();
                }
            } catch (error) {
                console.error('Error checking auth status:', error);
            }
        });

        // Add logout handler
        document.getElementById('logoutLink').addEventListener('click', async function(e) {
            e.preventDefault();
            try {
                const response = await fetch('/api/auth/logout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'include'
                });
                if (response.ok) {
                    isAuthenticated = false;
                    
                    // Try to parse JSON response first
                    try {
                        const data = await response.json();
                        if (data.success && data.redirect) {
                            window.location.href = data.redirect;
                        } else {
                            window.location.href = '/';
                        }
                    } catch (e) {
                        // If not JSON, just redirect to home
                        window.location.href = '/';
                    }
                }
            } catch (error) {
                console.error('Logout error:', error);
                // Even if there's an error, redirect to home to clear the session
                window.location.href = '/';
            }
        });

        // Add login/register modal handler
        document.getElementById('loginRegisterLink').addEventListener('click', function(e) {
            e.preventDefault();
            const loginModal = document.getElementById('loginModal');
            if (loginModal) {
                showModal(loginModal);
            } else {
                console.error('Login modal not found');
            }
        });

        // Export auth state for other scripts
        window.getAuthState = function() {
            return isAuthenticated;
        };

        // Add this to your existing script section
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !expanded);
                    mobileMenu.classList.toggle('hidden');
                    mobileMenuButton.querySelector('svg.block').classList.toggle('hidden');
                    mobileMenuButton.querySelector('svg.hidden').classList.toggle('hidden');
                });
            }

            // Mobile Products dropdown toggle
            const mobileProductsButton = document.getElementById('mobileProductsButton');
            const mobileProductsMenu = document.getElementById('mobileProductsMenu');
            
            if (mobileProductsButton && mobileProductsMenu) {
                mobileProductsButton.addEventListener('click', () => {
                    mobileProductsMenu.classList.toggle('hidden');
                });
            }

            // Desktop Products dropdown behavior
            const productsDropdown = document.getElementById('productsDropdown');
            const productsMenu = document.getElementById('productsMenu');
            let dropdownTimeout;

            if (productsDropdown && productsMenu) {
                productsDropdown.addEventListener('mouseenter', () => {
                    clearTimeout(dropdownTimeout);
                    productsMenu.classList.remove('opacity-0', 'invisible');
                    productsMenu.classList.add('opacity-100', 'visible');
                });

                productsDropdown.addEventListener('mouseleave', () => {
                    dropdownTimeout = setTimeout(() => {
                        productsMenu.classList.remove('opacity-100', 'visible');
                        productsMenu.classList.add('opacity-0', 'invisible');
                    }, 300); // 300ms delay before hiding
                });
            }

            // Admin dropdown toggle
            const adminMenuButton = document.getElementById('adminMenuButton');
            const adminMenu = document.getElementById('adminMenu');
            
            if (adminMenuButton && adminMenu) {
                adminMenuButton.addEventListener('click', () => {
                    adminMenu.classList.toggle('hidden');
                });
                
                // Close admin menu when clicking outside
                document.addEventListener('click', (event) => {
                    if (!adminMenuButton.contains(event.target) && !adminMenu.contains(event.target)) {
                        adminMenu.classList.add('hidden');
                    }
                });
            }

            // Update mobile menu items when auth state changes
            const updateMobileMenu = (isAuthenticated) => {
                const mobileLoginRegisterLink = document.getElementById('mobileLoginRegisterLink');
                const mobileLogoutLink = document.getElementById('mobileLogoutLink');

                if (isAuthenticated) {
                    if (mobileLoginRegisterLink) mobileLoginRegisterLink.classList.add('hidden');
                    if (mobileLogoutLink) mobileLogoutLink.classList.remove('hidden');
                } else {
                    if (mobileLoginRegisterLink) mobileLoginRegisterLink.classList.remove('hidden');
                    if (mobileLogoutLink) mobileLogoutLink.classList.add('hidden');
                }
            };

            // Add mobile logout handler
            const mobileLogoutLink = document.getElementById('mobileLogoutLink');
            if (mobileLogoutLink) {
                mobileLogoutLink.addEventListener('click', async function(e) {
                    e.preventDefault();
                    try {
                        const response = await fetch('/api/auth/logout', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            credentials: 'include'
                        });
                        if (response.ok) {
                            isAuthenticated = false;
                            // Update both desktop and mobile UI
                            updateMobileMenu(false);
                            if (window.updateUI) {
                                window.updateUI(false);
                            }
                            
                            // Try to parse JSON response first
                            try {
                                const data = await response.json();
                                if (data.success && data.redirect) {
                                    window.location.href = data.redirect;
                                } else {
                                    window.location.href = '/';
                                }
                            } catch (e) {
                                // If not JSON, just redirect to home
                                window.location.href = '/';
                            }
                        }
                    } catch (error) {
                        console.error('Logout error:', error);
                        // Even if there's an error, redirect to home to clear the session
                        window.location.href = '/';
                    }
                });
            }

            // Add mobile login/register handler
            const mobileLoginRegisterLink = document.getElementById('mobileLoginRegisterLink');
            if (mobileLoginRegisterLink) {
                mobileLoginRegisterLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    const loginModal = document.getElementById('loginModal');
                    if (loginModal) {
                        showModal(loginModal);
                    }
                });
            }

            // Override the global updateUI function to handle both desktop and mobile
            const originalUpdateUI = window.updateUI;
            window.updateUI = function(isAuthenticated) {
                // Call original updateUI for desktop
                if (originalUpdateUI) {
                    originalUpdateUI(isAuthenticated);
                }
                // Update mobile menu
                updateMobileMenu(isAuthenticated);
                // Update cart count if authenticated
                if (isAuthenticated && typeof window.updateCartCount === 'function') {
                    window.updateCartCount();
                }
            };

            // Initial state setup
            const checkInitialAuthState = async () => {
                try {
                    const response = await fetch('/api/auth/check', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        credentials: 'include'
                    });

                    if (response.ok) {
                        const data = await response.json();
                        isAuthenticated = data.authenticated;
                        // Update both desktop and mobile UI
                        updateMobileMenu(isAuthenticated);
                        if (window.updateUI) {
                            window.updateUI(isAuthenticated);
                        }
                    }
                } catch (error) {
                    console.error('Error checking auth status:', error);
                }
            };

            // Check initial auth state
            checkInitialAuthState();

            // Add event listener for cart updates
            document.addEventListener('cartUpdated', function() {
                if (isAuthenticated && typeof window.updateCartCount === 'function') {
                    window.updateCartCount();
                }
            });
        });
    </script>
</body>
</html> 